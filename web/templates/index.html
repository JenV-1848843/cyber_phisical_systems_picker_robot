<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RabbitMQ Publisher</title>
    <link rel="stylesheet" href="/static/styles.css">  </head>
  <body>
    <h1>Warehouse picker robot: Management page</h1>

    <div class="container">
      <form method="post">
        <h2>Add task to the queue</h2>
        <label for="x_target">X coordinate</label>
        <input type="number" id="x_target" name="x_target" min="-1000" max="1000" required />

        <label for="y_target">Y coordinate</label>
        <input type="number" id="y_target" name="y_target" min="-1000" max="1000" required />

        <label for="description">Description</label>
        <textarea id="description" name="description" rows="2" maxlength="128" required></textarea>

        <button type="submit">Send Message</button>
      </form>

      <div class="map-container">
        <h2>Live SLAM Map</h2>
        <img id="slamMap" src="/static/map.png" alt="SLAM Map" />
      </div>
    </div>

    <p>{{ message }}</p>

    <script>
      setInterval(() => {
        const mapImg = document.getElementById("slamMap");
        const timestamp = new Date().getTime();
        mapImg.src = `/static/map.png?cache=` + timestamp;
      }, 500);
    </script>
  </body>
</html>
